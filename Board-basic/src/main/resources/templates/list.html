<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Board Service</title>
    <meta charset="UTF-8" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/app.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>

<!-- Header -->
<div id="header" class="d-flex bd-highlight">
    <a th:href="@{/}" class="p-2 flex-grow-1 bd-highlight">Board Service</a>
    <form th:action="@{/posts/search}" method="get" class="form-inline p-2 bd-highlight">
        <input type="text" name="keyword" class="form-control" placeholder="검색">
        <button class="btn btn-success bi bi-search"></button>
    </form>
</div>

<!-- Nav -->
<nav id="nav">
    <div class="text-right">
        <span th:if="${user != null}" class="mx-3" th:text="${user.nickname + '님 안녕하세요!'}"></span>
        <a th:if="${user != null}" th:href="@{/logout}" class="btn btn-outline-dark">로그아웃</a>

        <a th:if="${user == null}" th:href="@{/oauth2/authorization/naver}" class="btn btn-outline-success">
            <img id="img" src="/img/naver.ico"/> 로그인
        </a>
        <a th:if="${user == null}" th:href="@{/oauth2/authorization/google}" class="btn btn-outline-danger bi bi-google"> 로그인</a>
        <a th:if="${user == null}" th:href="@{/auth/login}" class="btn btn-outline-dark bi bi-lock-fill"> 로그인</a>
        <a th:if="${user == null}" th:href="@{/auth/join}" class="btn btn-outline-dark bi bi-person-circle"> 회원가입</a>
    </div>
</nav>

<!-- 댓글 작성 -->
<!--<div class="card mt-4">-->
<!--    <div class="card-header bi bi-chat-right-dots"> Write a Comment</div>-->
<!--    <form>-->
<!--        <input type="hidden" id="postsId" th:value="${posts.id}" />-->
<!--        <div th:if="${user != null}">-->
<!--            <div class="card-body">-->
<!--                <textarea id="comment" class="form-control" rows="4" placeholder="댓글을 입력하세요"></textarea>-->
<!--            </div>-->
<!--            <div class="card-footer">-->
<!--                <button type="button" id="btn-comment-save" class="btn btn-outline-primary bi bi-pencil-square"> 등록</button>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div th:if="${user == null}" class="card-body" style="font-size: small">-->
<!--            <a th:href="@{/auth/login}">로그인</a>을 하시면 댓글을 등록할 수 있습니다.-->
<!--        </div>-->
<!--    </form>-->
<!--</div>-->

<!--&lt;!&ndash; 댓글 목록 &ndash;&gt;-->
<!--<div class="card mt-4">-->
<!--    <div class="card-header bi bi-chat-dots">-->
<!--        <span th:text="${#lists.size(comments)}"></span> Comments-->
<!--    </div>-->
<!--    <ul class="list-group-flush">-->
<!--        <li th:each="comment : ${comments}" th:id="'comments-' + ${comment.id}" class="list-group-item">-->
<!--            <span>-->
<!--                <span style="font-size: small" th:text="${comment.nickname}"></span>-->
<!--                <span style="font-size: xx-small" th:text="${comment.createdDate}"></span>-->
<!--            </span>-->

<!--            &lt;!&ndash; 수정/삭제 버튼 &ndash;&gt;-->
<!--            <a th:if="${comment.userId == user.id}" data-toggle="collapse"-->
<!--               th:attr="data-target='.multi-collapse-' + ${comment.id}" class="bi bi-pencil-square"></a>-->
<!--            <a th:if="${comment.userId == user.id}" href="javascript:void(0);"-->
<!--               th:onclick="'main.commentDelete(' + ${comment.postsId} + ',' + ${comment.id} + ',' + ${comment.userId} + ',' + ${user.id} + ')' "-->
<!--               class="bi bi-x-square"></a>-->

<!--            &lt;!&ndash; 댓글 보기 &ndash;&gt;-->
<!--            <p th:text="${comment.comment}" th:class="'collapse multi-collapse-' + ${comment.id} + ' show'"></p>-->

<!--            &lt;!&ndash; 댓글 수정 &ndash;&gt;-->
<!--            <form th:class="'collapse multi-collapse-' + ${comment.id}">-->
<!--                <input type="hidden" id="id" th:value="${comment.id}" />-->
<!--                <input type="hidden" id="postsId" th:value="${comment.postsId}" />-->
<!--                <input type="hidden" id="writerUserId" th:value="${comment.userId}" />-->
<!--                <input type="hidden" id="sessionUserId" th:value="${user.id}" />-->
<!--                <div class="form-group">-->
<!--                    <textarea class="form-control" id="comment-content" rows="3" th:text="${comment.comment}"></textarea>-->
<!--                </div>-->
<!--                <button type="button" id="btn-comment-update" class="btn btn-outline-primary bi bi-pencil-square"> 수정</button>-->
<!--            </form>-->
<!--        </li>-->
<!--    </ul>-->
<!--</div>-->

<!-- 게시글 목록 테이블 -->
<div id="posts_list">
    <table id="table" class="table table-horizontal mt-4">
        <thead id="thead">
        <tr>
            <th>번호</th>
            <th class="col-md-6 text-center">제목</th>
            <th>작성자</th>
            <th>작성일</th>
            <th>조회수</th>
        </tr>
        </thead>
        <tbody id="tbody">
        <tr th:each="post : ${posts}">
            <td th:text="${post.id}"></td>
            <td><a th:href="@{/posts/read/{id}(id=${post.id})}" th:text="${post.title}"></a></td>
            <td th:text="${post.writer}"></td>
            <td th:text="${post.createdDate}"></td>
            <td th:text="${post.view}"></td>
        </tr>
        </tbody>
    </table>

    <div class="text-right">
        <a th:href="@{/posts/write}" class="btn btn-primary bi bi-pencil-fill"> 글쓰기</a>
    </div>

    <!-- 페이지네이션 -->
    <div th:replace="~{posts/posts-page :: paginationFragment}"></div>
</div>

<!-- Footer -->
<footer id="footer">
    Powered by Kim Kyung Hwan
    <a href="https://github.com/" target="_blank" class="bi bi-github"></a>
    <i class="bi bi-reception-4"></i>
    <i class="bi bi-phone"> 010-9692-5549</i>
</footer>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="/js/app.js"></script>

</body>
</html>